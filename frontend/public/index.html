<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <title>Login - PokeApp</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{font-family:system-ui,Arial;display:flex;align-items:center;justify-content:center;height:100vh}
    .card{padding:20px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1)}
  </style>
</head>
<body>
  <div class="card">
    <h2>Iniciar sesi칩n</h2>
    <form id="loginForm">
      <label>Usuario<br><input id="user" required /></label><br><br>
      <label>Contrase침a<br><input id="password" type="password" required /></label><br><br>
      <button type="submit">Entrar</button>
    </form>
    <div id="msg"></div>
  </div>

  <script>
    document.getElementById('loginForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const user = document.getElementById('user').value;
      const password = document.getElementById('password').value;
      try {
        const res = await fetch('/auth/login', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({user, password})
        });
        if(!res.ok) throw new Error('Credenciales inv치lidas');
        const data = await res.json();
        localStorage.setItem('token', data.token);
        // redirige a la p치gina app
        window.location.href = '/app.html';
      } catch(err) {
        document.getElementById('msg').textContent = err.message;
      }
    });
  </script>
</body>
</html>
